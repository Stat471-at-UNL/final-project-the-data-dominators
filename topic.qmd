---
title: "STAT 471 Project Topic"
format: html
---

# The Data Dominators

Members: Mitch Fehr, Jack Stewart, Brett Stewart, Jia Yee Wong

## Introduction

We are developing an R package that contains cleaned 2023 and 2024 BRFSS datasets based on records from the state of Missouri. We chose this project because accessing BRFSS data currently requires downloading and manually extracting large ZIP files from the official website, which can be time-consuming and inconvenient. By creating this package, we aim to make the dataset easily accessible and ready to use directly within RStudio. Our goal is to simplify the process for other users and make BRFSS a well-known, user-friendly dataset that can be loaded as easily as built-in datasets like *iris*.

## Dataset

The BRFSS data for our project is found at this [link](https://www.cdc.gov/brfss/annual_data/annual_data.htm). The CDC along with state health departments regularly conduct telephone surveys to collect this health-related data about U.S. residents. We downloaded the 2023 and 2024 data (most recent releases) in the SAS Transport Format, both provided in separate .zip files. Reading in these files can be easily accomplished with the help of the `haven` R package.

To load the data:

```{r, eval=FALSE}
library(haven)

brfss_2024 <- read_xpt(unz("data/LLCP2024XPT.zip", "LLCP2024.XPT ")) # 457,670 records
brfss_2023 <- read_xpt(unz("data/LLCP2023XPT.zip", "LLCP2023.XPT ")) # 433,323 records
```

We plan to filter the dataset to only use records from the state of Missouri. Our original idea was to use Nebraska's data, but since it has limited topics, we chose our southeastern neighbors. The topics covered are:

-   Cancer Survivorship: Course of Treatment, Cancer Survivorship: Pain Management, Cancer Survivorship: Type of Cancer, Childhood Asthma Prevalence, Cognitive Decline, Diabetes, HPV – Vaccination, Marijuana Use, Other Tobacco Use, Random Child Selection, Sexual Orientation, Tobacco Cessation
-   We evaluated the Missing Completely At Random (MCAR) assumption using Little’s MCAR test. For the set of tobacco-use variables in 2024 (`SMOKE100, SMOKDAY2, USENOW3, ECIGNOW3`), the test yielded χ²(18) = 7033, p \< 0.001, with 10 distinct missing-data patterns. For the 2023 tobacco variables (`SMOKE100, SMOKDAY2, USENOW3, ECIGNOW2`), the result was similarly extreme, χ²(16) = 6957, p \< 0.001, with 9 missing-data patterns. The results strongly suggest that the missing data on tobacco use is not random. Among households with at least one child, Little’s MCAR test for the childhood asthma variables (`CASTHDX2, CASTHNO2`) also strongly rejected MCAR in both years: χ²(1) = 1412, p \< 0.001 in 2024 and χ²(1) = 1360, p \< 0.001 in 2023 (3 missing-data patterns in each year). Therefore, the missing data for childhood asthma is also not random.

## Course Relevance

There are several techniques within the scope of this course that will need to be utilized for the completion of this project:

1.  The first of which will be identifying missing values and what kind of missing value they are (MCAR, MAR, MNAR).
2.  Another skill required to complete this project will be imputing missing values. After analyzing the missing values, we will attempt to replace them with plausible values. To do this, we will use the Predictive Mean Matching technique to get more realistic results than just using the mean. For imputing, we will focus on two of Missouri's modules, **Childhood Asthma Prevalence** and **Tobacco Use**. For Childhood Asthma Prevalence, we will impute missing values in `CASTHDX2` (Ever told child has asthma) and `CASTHN02` (Child still has asthma) using demographics (i.e. `CAGEG`, `_CRACE1`) and family characteristics (i.e. `ASTHMA3`, `_SMOKER3`, `INCOME3`). For Tobacco Use, we will impute missing values in `SMOKDAY2` (Current smoking frequency) and `ECIGNOW2` (Current e-cig use) with demographics (`_AGE80`, `INCOME3`), health conditions (`CHCOCNC1`, `ASTHMA3`), and other substance usage (i.e. `ALCDAY4`, `MARJSMOKE`). These imputed values will be in a new column, so that a user of the library has access to the imputed columns as well as the originals.
3.  A third technique within the scope of the course that will need to be applied is the transforming and tidying of data. Creating an R package containing untidy data sets would lead to usability issues and definitely be a problem. Our plan for tidying the data will likely change over time as we clean the data set, but getting it to at least second normal form would be ideal (first normal form + no partial dependencies).

## Plan of Work

We’ll create a clean package structure with version control, documentation, and automated checks. We’ll need to download, read, and locally store the CDC ZIP/XPT files, then filter them to Missouri records. This will allow us to avoid downloading large files repeatedly.

Before cleaning, we'll check how many rows and columns and what each variable represents. Next, we'll need to identify which variables have missing values or outliers. We will handle missing data using multiple imputation. For each variable with missing values, we will generate five imputed versions. For each record, one random imputed value will be selected to create a single completed dataset, while still leaving the original variable with its missing values for reference.

Due to BRFSS using coded responses, we will also review the codebooks and recode these values when needed. We will also make variable names consistent across the 2023 and 2024 datasets to ensure they can be easily combined. We'll document these cleaning steps and help make the work done transparent for future package users.
